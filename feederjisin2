javascript:(()=>{const API="https://api.p2pquake.net/v2/jma/quake?limit=1";const S={10:"1",20:"2",30:"3",40:"4",45:"5弱",50:"5強",55:"6弱",60:"6強",70:"7"};let lastId=null;const startTime=Date.now();async function check(){try{const r=await fetch(API);if(!r.ok)return;const j=await r.json();if(!Array.isArray(j)||!j.length)return;const d=j[0];if(d.code!==551)return;const quakeTime=new Date(d.earthquake?.time||d.time||0).getTime();if(!quakeTime||quakeTime<startTime)return;const id=d.id;if(id===lastId)return;const input=document.getElementById("post_form_single");const btn=document.getElementById("post_btn");if(!input||!btn)return;lastId=id;const place=d.earthquake.hypocenter?.name||"不明";const scale=S[d.earthquake.maxScale]||"不明";const mag=d.earthquake.hypocenter?.magnitude||"不明";input.value=`地震の情報が入りました。震源地は ${place} です。地震の強さは 震度${scale} です。マグニチュードは ${mag}M です。以上みかんからお伝えしました。`;btn.click();}catch(e){}}setInterval(check,15000);})();
